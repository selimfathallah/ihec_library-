<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:vm="using:IHECLibrary.ViewModels"
             xmlns:converters="using:IHECLibrary.Converters"
             mc:Ignorable="d" d:DesignWidth="800" d:DesignHeight="600"
             x:Class="IHECLibrary.Views.LoginView"
             x:DataType="vm:LoginViewModel">

  <UserControl.Resources>
    <converters:BoolToColorConverter x:Key="LocalBoolToColorConverter"/>
  </UserControl.Resources>

  <Grid>
    <Grid.ColumnDefinitions>
      <ColumnDefinition Width="35*" />
      <ColumnDefinition Width="65*" />
    </Grid.ColumnDefinitions>

    <!-- Left side with login form -->
    <Grid Grid.Column="0" Background="White">
      <StackPanel Margin="30,20" VerticalAlignment="Center">
        <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" Margin="0,0,0,10">
          <TextBlock Text="ðŸ“š" FontSize="24" Margin="0,0,5,0" VerticalAlignment="Center"/>
          <TextBlock Text="IHEC Library" FontSize="24" FontWeight="SemiBold" Foreground="#1a4b8a"/>
        </StackPanel>
        
        <TextBlock Text="Access the library resources of IHEC College" 
                 FontSize="14" TextAlignment="Center" 
                 Foreground="#666666" Margin="0,0,0,20"/>
                 
        <!-- Tabs for Login/Register -->
        <Grid Margin="0,0,0,20">
          <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*" />
            <ColumnDefinition Width="*" />
          </Grid.ColumnDefinitions>
          
          <Border Grid.Column="0" BorderThickness="0,0,0,2" 
                  BorderBrush="{Binding IsLoginTab, Converter={StaticResource LocalBoolToColorConverter}, ConverterParameter='#1a4b8a,#e0e0e0'}">
            <Button Content="Login" Command="{Binding SwitchToLoginCommand}"
                    Background="Transparent" 
                    Foreground="{Binding IsLoginTab, Converter={StaticResource LocalBoolToColorConverter}, ConverterParameter='#1a4b8a,#666666'}"
                    HorizontalAlignment="Center" Padding="10,5,10,5"/>
          </Border>
          
          <Border Grid.Column="1" BorderThickness="0,0,0,2"
                  BorderBrush="{Binding !IsLoginTab, Converter={StaticResource LocalBoolToColorConverter}, ConverterParameter='#1a4b8a,#e0e0e0'}">
            <Button Content="Register" Command="{Binding GoToRegisterCommand}"
                    Background="Transparent"
                    Foreground="{Binding !IsLoginTab, Converter={StaticResource LocalBoolToColorConverter}, ConverterParameter='#1a4b8a,#666666'}"
                    HorizontalAlignment="Center" Padding="10,5,10,5"/>
          </Border>
        </Grid>
        
        <!-- Login Form -->
        <TextBlock Text="Email" FontWeight="SemiBold" Margin="0,0,0,5"/>
        <TextBox Text="{Binding Email}" Watermark="email@ihec.tn" Margin="0,0,0,15"/>
        
        <TextBlock Text="Password" FontWeight="SemiBold" Margin="0,0,0,5"/>
        <TextBox Text="{Binding Password}" PasswordChar="â€¢" Watermark="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢" Margin="0,0,0,20"/>
        
        <!-- Error message -->
        <TextBlock Text="{Binding ErrorMessage}" 
                   IsVisible="{Binding ErrorMessage, Converter={x:Static StringConverters.IsNotNullOrEmpty}}" 
                   Foreground="Red" 
                   TextWrapping="Wrap" 
                   Margin="0,0,0,10"/>
        
        <!-- Login button -->
        <Button Content="Login" Command="{Binding SignInCommand}" 
                Background="#1a4b8a" Foreground="White" 
                HorizontalAlignment="Stretch" HorizontalContentAlignment="Center"
                Height="40" CornerRadius="4" Margin="0,0,0,15"
                IsEnabled="{Binding !IsLoading}"/>
        
        <!-- Loading indicator -->
        <ProgressBar IsIndeterminate="True" 
                     IsVisible="{Binding IsLoading}"
                     HorizontalAlignment="Stretch"
                     Height="3"
                     Margin="0,-15,0,15"/>
        
        <!-- Additional buttons for Register and Admin Login -->
        <StackPanel Spacing="10" Margin="0,10,0,0">
          <Button Content="Register New Account" 
                  Command="{Binding GoToRegisterCommand}" 
                  Background="#4a7dbe" 
                  Foreground="White"
                  HorizontalAlignment="Stretch" 
                  HorizontalContentAlignment="Center"
                  Height="40" 
                  CornerRadius="4"/>
                  
          <Button Content="Login as Administrator" 
                  Command="{Binding GoToAdminLoginCommand}" 
                  Background="Transparent" 
                  BorderBrush="#1a4b8a"
                  BorderThickness="1"
                  Foreground="#1a4b8a"
                  HorizontalAlignment="Stretch" 
                  HorizontalContentAlignment="Center"
                  Height="40" 
                  CornerRadius="4"/>
        </StackPanel>
        
        <!-- Terms text -->
        <TextBlock Text="By logging in or registering, you agree to the IHEC Library's terms and conditions." 
                   TextWrapping="Wrap" TextAlignment="Center"
                   FontSize="12" Foreground="#888888" Margin="0,15,0,0"/>
      </StackPanel>
    </Grid>
    
    <!-- Right side with welcome banner -->
    <Grid Grid.Column="1" Background="#1a4b8a">
      <StackPanel VerticalAlignment="Center" Margin="40,20">
        <TextBlock Text="Welcome to IHEC Library" 
                   FontSize="28" FontWeight="SemiBold" 
                   Foreground="White" TextAlignment="Center"
                   Margin="0,0,0,15"/>
                   
        <TextBlock Text="Access thousands of academic resources, reserve books online, and discover new knowledge." 
                   FontSize="16" TextWrapping="Wrap" TextAlignment="Center"
                   Foreground="White" Margin="0,0,0,40"/>
        
        <!-- First row of stats -->
        <Grid Margin="0,0,0,30">
          <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*" />
            <ColumnDefinition Width="*" />
          </Grid.ColumnDefinitions>
          
          <!-- Books stat -->
          <StackPanel Grid.Column="0" HorizontalAlignment="Center">
            <TextBlock Text="10k+" FontSize="32" FontWeight="Bold" Foreground="White" TextAlignment="Center"/>
            <TextBlock Text="Books" FontSize="14" Foreground="White" TextAlignment="Center"/>
          </StackPanel>
          
          <!-- Digital Resources stat -->
          <StackPanel Grid.Column="1" HorizontalAlignment="Center">
            <TextBlock Text="500+" FontSize="32" FontWeight="Bold" Foreground="White" TextAlignment="Center"/>
            <TextBlock Text="Digital Resources" FontSize="14" Foreground="White" TextAlignment="Center"/>
          </StackPanel>
        </Grid>
        
        <!-- Second row of stats -->
        <Grid>
          <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*" />
            <ColumnDefinition Width="*" />
          </Grid.ColumnDefinitions>
          
          <!-- Online Access stat -->
          <StackPanel Grid.Column="0" HorizontalAlignment="Center">
            <TextBlock Text="24/7" FontSize="32" FontWeight="Bold" Foreground="White" TextAlignment="Center"/>
            <TextBlock Text="Online Access" FontSize="14" Foreground="White" TextAlignment="Center"/>
          </StackPanel>
          
          <!-- Active Users stat -->
          <StackPanel Grid.Column="1" HorizontalAlignment="Center">
            <TextBlock Text="5k+" FontSize="32" FontWeight="Bold" Foreground="White" TextAlignment="Center"/>
            <TextBlock Text="Active Users" FontSize="14" Foreground="White" TextAlignment="Center"/>
          </StackPanel>
        </Grid>
      </StackPanel>
    </Grid>
  </Grid>
</UserControl>
